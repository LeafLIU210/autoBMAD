# <!-- Powered by BMADâ„¢ Core -->

## Story 1.4: Command-Line Interface

---

### Status
**Done**

---

### Story
**As a** user,
**I want** a command-line interface to test the bubble sort algorithm,
**so that** I can easily demonstrate and experiment with the implementation.

---

### Acceptance Criteria
1. Create CLI entry point that accepts arrays as command-line arguments
2. Support reading arrays from files or standard input
3. Provide options for different output formats (sorted array, detailed process)
4. Include help documentation and usage examples
5. Handle command-line errors gracefully with helpful error messages
6. Support both interactive and batch modes of operation

---

### Tasks / Subtasks
- [x] Create CLI entry point (AC: #1)
  - [x] Setup entry point in pyproject.toml or setup.py
  - [x] Create main CLI function using argparse or click
  - [x] Accept array arguments from command line
  - [x] Parse comma-separated or space-separated values
- [x] Implement file input support (AC: #2)
  - [x] Add --input-file or -i flag for reading from file
  - [x] Support common file formats (CSV, one number per line, JSON)
  - [x] Support stdin input (automatic detection)
  - [x] Validate file format and handle errors
- [x] Add output format options (AC: #3)
  - [x] Default: sorted array output
  - [x] Add --format flag with sorted, detailed, steps options
  - [x] Show sorting process (each pass)
  - [x] Show statistics (comparisons, swaps)
- [x] Create help documentation (AC: #4)
  - [x] Auto-generated help from argparse
  - [x] Usage examples in help text
  - [x] Detailed help with algorithm information
  - [x] Online help with --help flag
- [x] Implement error handling (AC: #5)
  - [x] Catch invalid input formats
  - [x] Provide helpful error messages
  - [x] Exit gracefully on errors
  - [x] Validate numeric inputs
- [x] Support multiple modes (AC: #6)
  - [x] Interactive mode: prompt user for input
  - [x] Batch mode: process single input
  - [x] Support stdin for piping from other commands

---

### Dev Notes

**Epic Reference:** Epic 1: Core Algorithm Foundation

**Source Information:**
- Epic file location: docs/epics/epic-1-core-algorithm-foundation.md
- This story creates a command-line interface for the bubble sort implementation
- Builds upon Story 1.2 (Basic Bubble Sort Implementation)
- Can be developed in parallel with Story 1.3 (Comprehensive Testing Suite)

**Dependencies:**
- Story 1.2 must be completed first (Basic Bubble Sort Implementation)
- Story 1.1 structure must be in place (Project Setup and Infrastructure)

**Technical Context:**
- CLI provides user-friendly access to bubble sort implementation
- Primary users: students and educators demonstrating sorting algorithms
- Should be educational and easy to use
- Multiple input/output methods support various use cases
- Error messages should be educational, explaining what went wrong

**Testing Standards:**
- Test file location: tests/ directory (from Story 1.1)
- Test framework: pytest (from Story 1.1)
- Include CLI tests using subprocess or click testing utilities
- Test all command-line options and flags
- Verify help documentation is accurate and helpful

**Development Notes:**
- This is Story 1.4 in Epic 1
- Estimated effort: 2 days
- Priority: Medium
- Dependencies: Story 1.2 (Basic Bubble Sort Implementation)

**CLI Design Considerations:**
- Use argparse (standard library) or click (more user-friendly)
- Entry point command: `bubble-sort` or similar
- Input formats: command line args, files, stdin
- Output formats: simple list, verbose with steps, JSON option
- Exit codes: 0 for success, non-zero for errors

**Educational Features:**
- Show step-by-step sorting process with --verbose
- Display number of comparisons and swaps
- Optional timing information
- Interactive mode for learning

**Relevant Source Tree:**
- CLI module: src/cli.py or main module with CLI code
- Entry point configured in pyproject.toml or setup.py
- Documentation: README.md usage section

---

### Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-07 | 1.0 | Initial story creation from Epic 1 | Scrum Master |

---

### Dev Agent Record

#### Agent Model Used
Claude 3.5 Sonnet (2024-10-22)

#### Debug Log References
- test_results.json: Comprehensive test results for all 186 tests
- No debug logs required - all tests passed on first run after fixes

#### Completion Notes List
1. Created comprehensive test suite in tests/test_cli.py with 77 tests covering all acceptance criteria
2. Updated tests/test_integration.py to use subprocess instead of click.testing for compatibility with argparse-based CLI
3. All 186 tests pass successfully (77 in test_cli.py, 32 in test_integration.py)
4. Test coverage includes:
   - Command-line argument parsing (space-separated, comma-separated, JSON)
   - File input support (--input-file/-i flag, CSV, JSON, space-separated)
   - Standard input support (piped input)
   - Multiple output formats (sorted, detailed with statistics, steps showing each pass)
   - Help documentation (--help, -h flags)
   - Error handling (invalid input, non-existent files, type validation)
   - Interactive and batch modes
   - Edge cases (empty input, single element, duplicates, negatives, floats)
5. All acceptance criteria fully tested and verified

#### File List
- tests/test_cli.py: Comprehensive CLI test suite (77 tests) - CREATED/UPDATED
- tests/test_integration.py: Integration tests for CLI (32 tests) - UPDATED
- src/cli.py: CLI implementation (already existed, verified compatible with tests)
- src/bubble_sort.py: Bubble sort algorithm implementation (already existed)
- pyproject.toml: Entry point configuration (already existed, verified working)
- No source code changes required - existing implementation fully satisfies all requirements

---

### QA Results
{{qa_results}}
