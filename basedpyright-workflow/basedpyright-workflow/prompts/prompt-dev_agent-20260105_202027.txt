Please fix the Python code in the following file: d:\GITHUB\pytQt_template\autoBMAD\epic_automation\dev_agent.py

BasedPyright type errors (8):  Line 55, Col 47: [reportUnknownParameterType] "options" 参数的类型未知 (reportUnknownParameterType)
  Line 55, Col 57: [reportInvalidTypeForm] 类型表达式中不允许使用变量 (reportInvalidTypeForm)
  Line 70, Col 25: [reportOptionalCall] `None` 不支持调用 (reportOptionalCall)
  Line 70, Col 54: [unknown] 参数类型未知
  Line 74, Col 23: [reportUnknownMemberType] "aclose" 类型未知 (reportUnknownMemberType)
  Line 74, Col 33: [unknown] 无法访问 "AsyncIterator[Message]" 类的 "aclose" 属性
  Line 467, Col 24: [unknown] "claude_sdk_context" 的类型部分未知
  Line 531, Col 32: [unknown] "claude_sdk_context" 的类型部分未知

Requirements:
1. Fix all the errors listed above
2. Maintain code functionality and readability
3. Follow Python best practices
4. Preserve existing code style where possible
5. Add comments explaining complex fixes if necessary

Please provide the complete fixed file content.
