# AI助手工作流程详细说明

**版本**: 1.0
**最后更新**: 2026-01-04

---

## 目录

1. [工作流程概述](#1-工作流程概述)
2. [阶段一：分析问题](#2-阶段一分析问题)
3. [阶段二：制定方案](#3-阶段二制定方案)
4. [阶段三：执行方案](#4-阶段三执行方案)
5. [最佳实践](#5-最佳实践)

---

## 1. 工作流程概述

### 1.1 核心理念

本项目采用结构化的三阶段AI工作流程，确保每个开发任务都经过充分的分析、规划和执行。

### 1.2 工作流特点

- **系统性思维**: 看到具体问题时，思考整个系统
- **第一性原理**: 从功能本质出发，而不是现有代码
- **DRY原则**: 任何重复代码都必须指出并优先处理
- **长远考虑**: 评估技术债务和维护成本

---

## 2. 阶段一：分析问题

### 2.1 阶段标识

**声明格式**：`【分析问题】`

### 2.2 目的

因为可能存在多个可选方案，要做出正确的决策，需要足够的依据。

### 2.3 必须做的事

- 深入理解需求本质
- 搜索所有相关代码
- 识别问题根因
- 发现并指出重复代码

做完以上事项，就可以向用户提问了。

### 2.4 融入的原则

- **系统性思维**: 看到具体问题时，思考整个系统
- **第一性原理**: 从功能本质出发，而不是现有代码
- **DRY原则**: 任何重复代码都必须指出并优先处理
- **长远考虑**: 评估技术债务和维护成本

### 2.5 绝对禁止

- ❌ 修改任何代码
- ❌ 急于给出解决方案
- ❌ 跳过搜索和理解步骤
- ❌ 不分析就推荐方案

### 2.6 阶段转换规则

本阶段结束时需要向用户提问。如果存在多个无法抉择的方案，要向用户提问。如果没有问题需要澄清，则直接进入下一阶段。

---

## 3. 阶段二：制定方案

### 3.1 阶段标识

**声明格式**：`【制定方案】`

### 3.2 前置条件

- 用户明确回答了关键技术决策。

### 3.3 必须做的事

- 列出变更（新增、修改、删除）的文件，简要描述每个文件的变化
- 消除重复逻辑：如果发现重复代码，必须通过复用或抽象来消除
- 确保修改后的代码符合DRY原则和良好的架构设计

如果新发现了需要向用户收集的关键决策，在这个阶段还可以继续提问，直到没有不明确的问题之后，本阶段结束。

如果是简单修改，可以自动进入执行方案阶段，不用经过用户确认。

---

## 4. 阶段三：执行方案

### 4.1 阶段标识

**声明格式**：`【执行方案】`

### 4.2 必须做的事

- 严格按照选定方案实现
- 修改后运行类型检查

### 4.3 绝对禁止

- ❌ 提交代码（除非用户明确要求）
- ❌ 启动开发服务器

如果在这个阶段发现了拿不准的问题，请向用户提问。

### 4.4 重要提醒

不要在回答的开头直接说"你说的对"。不允许没有调查就直接给结论，不允许讨好用户。

---

## 5. 最佳实践

### 5.1 提问的艺术

- 在分析阶段结束时，提出清晰、具体的问题
- 如果需要用户做决策，提供选项并说明利弊
- 避免模糊不清的问题

### 5.2 方案制定

- 始终优先考虑消除重复代码（DRY原则）
- 选择最简单的解决方案（KISS原则和奥卡姆剃刀）
- 只实现当前需要的功能（YAGNI原则）

### 5.3 执行阶段

- 严格按照既定方案执行
- 如遇到问题，及时向用户反馈
- 完成后进行类型检查和质量验证

---

**参考文档**:
- [核心原则](./core_principles.md)
- [BMAD开发方法论](./bmad_methodology.md)

---

**版本历史**:
- v1.0 (2026-01-04): 初始版本，完整的AI助手工作流程说明
