# Story 1.2: Basic Bubble Sort Implementation

## Status
**Status**: Ready for Development

## Story
**As a** user,
**I want** a working bubble sort algorithm that can sort lists of numbers,
**So that** I can understand and use the fundamental sorting algorithm.

## Acceptance Criteria
- [ ] Implement `bubble_sort()` function that accepts a list and returns a sorted copy (original list unchanged)
- [ ] Function handles empty lists correctly (returns empty list)
- [ ] Function handles single-element lists correctly (returns list with that element)
- [ ] Raises `TypeError` for invalid inputs (None, non-iterable types)
- [ ] Raises `TypeError` for lists containing non-comparable elements
- [ ] Includes comprehensive docstring with algorithm explanation and O(n²) complexity analysis
- [ ] Implementation follows the standard bubble sort algorithm with nested loops (outer loop for passes, inner loop for comparisons)
- [ ] Type hints for all function parameters and return values using `typing` module

## Tasks / Subtasks
- [ ] Task 1: Create the `bubble_sort.py` module in the source package
  - [ ] Define module-level docstring explaining the module purpose
  - [ ] Import required typing modules (`List`, `TypeVar`, etc.)
- [ ] Task 2: Implement the `bubble_sort()` function
  - [ ] Add type hints: `def bubble_sort(arr: List[T]) -> List[T]`
  - [ ] Create a copy of the input list to ensure pure function behavior
  - [ ] Implement outer loop for number of passes (n-1 iterations)
  - [ ] Implement inner loop for adjacent element comparisons
  - [ ] Swap elements when left > right using tuple unpacking
  - [ ] Add early termination optimization (if no swaps in a pass, list is sorted)
- [ ] Task 3: Implement input validation
  - [ ] Check for None input and raise TypeError with descriptive message
  - [ ] Check for non-iterable input and raise TypeError
  - [ ] Handle comparison errors gracefully with meaningful error messages
- [ ] Task 4: Write comprehensive docstring
  - [ ] Include algorithm description (how bubble sort works)
  - [ ] Document time complexity: O(n²) worst/average, O(n) best case
  - [ ] Document space complexity: O(n) for the copy
  - [ ] Add usage examples in docstring
  - [ ] Document parameters, return value, and exceptions
- [ ] Task 5: Add module to package exports
  - [ ] Update `__init__.py` to export `bubble_sort` function

## Dev Notes
- **Pure Function**: The function must NOT modify the original input list - always work on a copy
- **Type Hints**: Use `TypeVar` for generic typing to support any comparable type: `T = TypeVar('T')`
- **Early Termination**: Include the optimization flag to detect when no swaps occur (list is sorted)
- **KISS Principle**: Keep implementation simple and readable - prioritize clarity over micro-optimizations
- **DRY Principle**: If helper functions are needed, extract them appropriately
- **Error Messages**: Make exception messages clear and helpful for debugging
- **Docstring Format**: Follow Google or NumPy docstring conventions for consistency
- **Dependencies**: This story depends on Story 1.1 (project structure must be in place)

## Testing
### Unit Tests
- [ ] Test sorting an empty list returns empty list
- [ ] Test sorting single-element list returns same element
- [ ] Test sorting already-sorted list returns correctly sorted list
- [ ] Test sorting reverse-sorted list returns correctly sorted list
- [ ] Test sorting random order list returns correctly sorted list
- [ ] Test with negative numbers
- [ ] Test with floating point numbers
- [ ] Test with mixed int/float numbers
- [ ] Test with duplicate values
- [ ] Test original list is not modified (pure function verification)
- [ ] Test `TypeError` raised for None input
- [ ] Test `TypeError` raised for non-iterable input (int, bool)
- [ ] Test `TypeError` raised for list with non-comparable elements

### Integration Tests
- [ ] Test function can be imported from package correctly
- [ ] Test function works with large lists (1000+ elements)

### Manual Testing
- [ ] Verify docstring renders correctly with `help(bubble_sort)`
- [ ] Verify type hints work with IDE autocomplete
- [ ] Test from command line: `python -c "from package import bubble_sort; print(bubble_sort([3,1,2]))"`

---
*Epic: Epic 1 - Core Algorithm Foundation*
*Priority: High*
*Estimated Effort: 3 days*
*Dependencies: Story 1.1 (Project Setup and Infrastructure)*
