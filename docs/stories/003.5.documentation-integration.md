# Story 003.5: Documentation & Integration

**Epic Reference**: [Epic-003: Quality Gates Integration](../epics/epic-003-quality-gates-sprint.md)

---

## Status
**Status**: Approved
**Priority**: Medium
**Estimated Effort**: 1 day
**Assigned To**: Dev Agent

---

## Story

**As a** BMAD automation system,
**I want to** document the quality gate workflow,
**so that** users understand the new automated quality processes.

---

## Acceptance Criteria

- [ ] README.md updated with quality gate workflow
- [ ] CLI help text updated with new flags
- [ ] Integration tests for complete pipeline
- [ ] Troubleshooting guide for quality gates (including Cancel Scope error prevention)
- [ ] Example epic demonstrating quality agents
- [ ] Documentation includes Cancel Scope safety requirements

---

## Tasks / Subtasks

- [ ] Task 1: Update README.md documentation
  - [ ] Subtask 1.1: Document quality gates workflow
  - [ ] Subtask 1.2: Add quality agents section
  - [ ] Subtask 1.3: Document new CLI flags
  - [ ] Subtask 1.4: Add troubleshooting section

- [ ] Task 2: Update CLI help text
  - [ ] Subtask 2.1: Add help text for --skip-quality flag
  - [ ] Subtask 2.2: Add help text for --skip-tests flag
  - [ ] Subtask 2.3: Update epic_driver.py CLI parser

- [ ] Task 3: Create integration tests
  - [ ] Subtask 3.1: Create end-to-end test for quality gates
  - [ ] Subtask 3.2: Test complete pipeline (Ruff → Basedpyright → Pytest)
  - [ ] Subtask 3.3: Test CLI flags with integration tests

- [ ] Task 4: Create troubleshooting guide
  - [ ] Subtask 4.1: Document common quality gate issues
  - [ ] Subtask 4.2: Add debugpy troubleshooting
  - [ ] Subtask 4.3: Document Cancel Scope error prevention (NO external timeouts)
  - [ ] Subtask 4.4: Add error resolution steps

- [ ] Task 5: Create example epic
  - [ ] Subtask 5.1: Create example demonstrating quality agents
  - [ ] Subtask 5.2: Show complete workflow execution
  - [ ] Subtask 5.3: Include quality gate output examples

---

## Dev Notes

### Epic-003 Integration Context
This story completes the Epic-003 implementation by providing comprehensive documentation and integration testing for the quality gates feature. It ensures users can effectively use and troubleshoot the new quality agents.

### Documentation Architecture
- **Main Documentation**: README.md updates
- **CLI Documentation**: Command-line help and usage
- **Troubleshooting**: Dedicated guide for quality gates issues
- **Examples**: Working epic demonstrating quality agents

### README.md Enhancement Structure
```markdown
# Quality Gates

## Overview
Quality gates add automated code quality validation to epic processing.

## Workflow
1. **Ruff Agent**: Code linting and auto-fix
2. **Basedpyright Agent**: Type checking and validation
3. **Pytest Agent**: Test automation with debugging

## Usage
```bash
python -m autoBMAD.epic_automation.epic_driver epic.md
python -m autoBMAD.epic_automation.epic_driver epic.md --skip-quality
python -m autoBMAD.epic_automation.epic_driver epic.md --skip-tests
```

## Troubleshooting
[Link to troubleshooting guide]
```

### Relevant Source Tree
- **Main Documentation**: `README.md` (project root)
- **CLI Help**: `autoBMAD/epic_automation/epic_driver.py` (argparse)
- **Troubleshooting**: `docs/troubleshooting/quality-gates.md`
- **Examples**: `docs/examples/quality-agents-example.md`

### Key Documentation Requirements
1. **Quality Gates Workflow**:
   - Explain sequential execution (Ruff → Basedpyright → Pytest)
   - Document activation after QA completion
   - Show progress tracking and cycle management

2. **CLI Usage**:
   - Document --skip-quality flag
   - Document --skip-tests flag
   - Show example commands
   - Explain flag combinations

3. **Troubleshooting Content**:
   - Common quality gate failures
   - Debugpy invocation issues
   - **Cancel Scope error prevention** (reference to `docs/evaluation/cancel-scope-error-analysis.md`)
   - **NO external timeouts** - SDK max_turns=150 only
   - Agent-specific error resolution

4. **Integration Testing**:
   - End-to-end workflow tests
   - CLI flag validation
   - Agent coordination tests
   - Error handling verification

### Example Epic Requirements
- **Complete Workflow**: Shows full epic processing with quality gates
- **Real Output**: Includes actual agent output examples
- **Flag Usage**: Demonstrates CLI flags in action
- **Error Scenarios**: Shows how errors are handled

### Documentation Quality Standards
- **Clarity**: Easy to understand for new users
- **Completeness**: Cover all quality gate features
- **Accuracy**: Match actual implementation behavior
- **Examples**: Provide working, tested examples

---

## Testing

### Testing Standards
- **Test File Location**: `tests/integration/test_quality_gates_complete.py`
- **Test Framework**: pytest
- **Test Coverage**: 100% of quality gate workflow

### Test Requirements
1. **Documentation Tests**:
   - Verify README.md accuracy
   - Test CLI help text display
   - Validate troubleshooting guide completeness

2. **Integration Tests**:
   - Test complete quality gates workflow
   - Test sequential agent execution
   - Test CLI flag combinations
   - Test error handling end-to-end

3. **Example Validation**:
   - Run example epic to verify accuracy
   - Validate output examples match reality
   - Test example commands execute successfully

### Special Testing Considerations
- **Documentation Accuracy**: Ensure examples match implementation
- **CLI Testing**: Verify help text formatting and content
- **Integration Coverage**: Test all quality gate paths
- **Example Maintenance**: Keep examples updated with changes

---

## Dev Agent Record

### Agent Model Used
_This section will be populated by the development agent during implementation_

### Debug Log References
_This section will be populated by the development agent during implementation_

### Completion Notes List
_This section will be populated by the development agent during implementation_

### File List
_This section will be populated by the development agent during implementation_

---

## QA Results

_This section will be populated by the QA agent during review_

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-07 | 1.1 | Added Cancel Scope error prevention documentation requirements - reference to cancel-scope-error-analysis.md, SDK max_turns=150 only | Product Owner |
| 2026-01-07 | 1.0 | Initial story creation for Documentation & Integration | Scrum Master (Bob) |

---
