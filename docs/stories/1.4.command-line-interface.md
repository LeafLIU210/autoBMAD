# <!-- Powered by BMADâ„¢ Core -->

**Story 1.4: Command-Line Interface**

---

## Status
**Draft**

---

## Epic Reference
**Epic:** 1 - Core Algorithm Foundation

**Dependencies:** Story 1.2 (Basic Bubble Sort Implementation)

---

## Story
**As a** user,
**I want** a command-line interface to test the bubble sort algorithm,
**so that** I can easily demonstrate and experiment with the implementation.

---

## Acceptance Criteria
1. Create CLI entry point that accepts arrays as command-line arguments
2. Support reading arrays from files or standard input
3. Provide options for different output formats (sorted array, detailed process)
4. Include help documentation and usage examples
5. Handle command-line errors gracefully with helpful error messages
6. Support both interactive and batch modes of operation

---

## Tasks / Subtasks
- [ ] Task 1: Create CLI entry point (AC: #1)
  - [ ] Create main CLI script (cli.py or __main__.py)
  - [ ] Accept array arguments from command line
  - [ ] Parse and validate command-line arguments
  - [ ] Convert string arguments to numeric arrays
- [ ] Task 2: Add file input support (AC: #2)
  - [ ] Support reading arrays from files (--file flag)
  - [ ] Support reading from standard input (pipe)
  - [ ] Handle different file formats (CSV, space-separated, etc.)
  - [ ] Add validation for file contents
- [ ] Task 3: Implement output formatting (AC: #3)
  - [ ] Add --format flag for different output options
  - [ ] Simple sorted array output (default)
  - [ ] Detailed process output showing sort steps
  - [ ] JSON format option for programmatic use
- [ ] Task 4: Create help documentation (AC: #4)
  - [ ] Add --help flag with comprehensive usage info
  - [ ] Include usage examples in help text
  - [ ] Document all command-line options
  - [ ] Add README examples section
- [ ] Task 5: Add error handling (AC: #5)
  - [ ] Validate numeric input
  - [ ] Handle file read errors gracefully
  - [ ] Provide helpful error messages
  - [ ] Exit with appropriate status codes
- [ ] Task 6: Support interactive mode (AC: #6)
  - [ ] Add --interactive flag for interactive input
  - [ ] Prompt user for array input
  - [ ] Allow multiple sorts in same session
  - [ ] Support batch mode with --batch flag

---

## Dev Notes
**Source:** Epic 1 - Core Algorithm Foundation

This story adds a command-line interface to make the bubble sort implementation easily accessible for demonstration and experimentation purposes.

**CLI Features Required:**
- Accept arrays as space-separated or comma-separated values
- Support multiple input methods: command-line args, files, stdin
- Provide clear, helpful output
- Include comprehensive help documentation
- Handle errors gracefully with informative messages

**Command-Line Interface Design:**
```
Usage: bubble_sort_cli [OPTIONS]

Options:
  --array TEXT      Comma or space-separated numbers to sort
  --file PATH       Read numbers from file
  --format TEXT     Output format: simple, detailed, json (default: simple)
  --interactive     Start interactive mode
  --batch           Enable batch mode for multiple inputs
  --help            Show this message and exit

Examples:
  bubble_sort_cli --array "5,3,8,1,9"
  bubble_sort_cli --array "5 3 8 1 9" --format detailed
  bubble_sort_cli --file input.txt
  echo "5 3 8 1 9" | bubble_sort_cli
  bubble_sort_cli --interactive
```

**Output Formats:**
1. **Simple (default):** Just the sorted array
   - Input: [5, 3, 8, 1, 9]
   - Output: [1, 3, 5, 8, 9]

2. **Detailed:** Show sorting process with steps
   - Input: [5, 3, 8, 1, 9]
   - Output: Show each pass through the list with swaps highlighted

3. **JSON:** Structured output for programmatic use
   - Output: {"original": [5, 3, 8, 1, 9], "sorted": [1, 3, 5, 8, 9], "comparisons": 10}

**Testing Standards:**
- Test CLI with various input combinations
- Test file input/output functionality
- Test error handling and edge cases
- Test interactive mode
- Verify help documentation is accurate
- Use pytest with subprocess tests or click testing utilities

---

## Testing
**Test File Location:** tests/test_cli.py

**Testing Standards:**
- Use pytest with subprocess or click.testing for CLI testing
- Test all command-line options and flags
- Test file input/output
- Test error handling (invalid inputs, missing files, etc.)
- Test interactive mode (if applicable)
- Test different output formats
- Verify help text accuracy
- Include integration tests that exercise end-to-end workflows

**Test Scenarios:**
1. Valid array input (space and comma separated)
2. File input with valid data
3. Stdin input via pipe
4. Invalid numeric input handling
5. Missing file handling
6. Different output formats
7. Interactive mode flow
8. Help documentation accuracy
9. Error messages clarity

---

## Change Log
| Date       | Version | Description              | Author |
|------------|---------|--------------------------|--------|
| 2026-01-05 | 1.0     | Initial story creation   | Bob    |

---

## Dev Agent Record

### Agent Model Used
{{agent_model_name_version}}

### Debug Log References
{{debug_log_references}}

### Completion Notes List
{{completion_notes}}

### File List
{{file_list}}

---

## QA Results
{{qa_results}}
