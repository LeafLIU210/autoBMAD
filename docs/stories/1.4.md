# Story 1.4: Command-Line Interface

---

## Status
Approved

---

## Story
**As a** user,
**I want** a command-line interface to test the bubble sort algorithm,
**so that** I can easily demonstrate and experiment with the implementation.

---

## Acceptance Criteria

1. Create CLI entry point that accepts arrays as command-line arguments
2. Support reading arrays from files or standard input
3. Provide options for different output formats (sorted array, detailed process)
4. Include help documentation and usage examples
5. Handle command-line errors gracefully with helpful error messages
6. Support both interactive and batch modes of operation

---

## Tasks / Subtasks

- [ ] Task 1: Setup CLI entry point configuration (AC: #1, #6)
  - [ ] Subtask 1.1: Configure entry point in pyproject.toml
  - [ ] Subtask 1.2: Create cli.py or main.py module
  - [ ] Subtask 1.3: Import bubble_sort function
  - [ ] Subtask 1.4: Setup argument parser

- [ ] Task 2: Implement command-line argument parsing (AC: #1, #4)
  - [ ] Subtask 2.1: Add positional argument for array input
  - [ ] Subtask 2.2: Add --file/-f flag for file input
  - [ ] Subtask 2.3: Add --verbose/-v flag for detailed output
  - [ ] Subtask 2.4: Add --help flag with usage documentation
  - [ ] Subtask 2.5: Add --version flag
  - [ ] Subtask 2.6: Validate numeric array format

- [ ] Task 3: Implement file input support (AC: #2)
  - [ ] Subtask 3.1: Create file reading function
  - [ ] Subtask 3.2: Support JSON format
  - [ ] Subtask 3.3: Support plain text format (comma-separated)
  - [ ] Subtask 3.4: Add file format auto-detection
  - [ ] Subtask 3.5: Handle file not found errors

- [ ] Task 4: Implement standard input support (AC: #2)
  - [ ] Subtask 4.1: Check if stdin has data
  - [ ] Subtask 4.2: Read from stdin
  - [ ] Subtask 4.3: Parse input from stdin
  - [ ] Subtask 4.4: Support pipe operations

- [ ] Task 5: Implement output formatting (AC: #3)
  - [ ] Subtask 5.1: Create basic sorted output format
  - [ ] Subtask 5.2: Create verbose format showing:
    - Original array
    - Number of passes
    - Number of swaps
    - Final sorted array
  - [ ] Subtask 5.3: Add JSON output option
  - [ ] Subtask 5.4: Format output for readability

- [ ] Task 6: Implement error handling (AC: #5)
  - [ ] Subtask 6.1: Catch invalid array format errors
  - [ ] Subtask 6.2: Catch file reading errors
  - [ ] Subtask 6.3: Display helpful error messages
  - [ ] Subtask 6.4: Display usage instructions on error
  - [ ] Subtask 6.5: Exit with appropriate error codes

- [ ] Task 7: Implement interactive mode (AC: #6)
  - [ ] Subtask 7.1: Add --interactive/-i flag
  - [ ] Subtask 7.2: Create input loop for interactive mode
  - [ ] Subtask 7.3: Add 'quit' command to exit
  - [ ] Subtask 7.4: Display prompt for interactive mode
  - [ ] Subtask 7.5: Handle keyboard interrupts gracefully

- [ ] Task 8: Add help documentation and examples (AC: #4)
  - [ ] Subtask 8.1: Create comprehensive --help text
  - [ ] Subtask 8.2: Add usage examples in help
  - [ ] Subtask 8.3: Document all command-line options
  - [ ] Subtask 8.4: Add README examples section

---

## Dev Notes

### Relevant Source Tree
```
src/bubble_sort/
├── __init__.py
├── bubble_sort.py
└── cli.py
```

### CLI Entry Point
- Entry point name: `bubble-sort` or `bubble_sort`
- Module: `src.bubble_sort.cli:main`
- Command-line tool: `bubble-sort [OPTIONS]`

### Argument Parser Configuration
```python
# Required arguments: array of numbers (positional)
# Optional arguments:
#   -f, --file FILE     Read from file
#   -i, --interactive   Interactive mode
#   -v, --verbose       Verbose output
#   --json              JSON output format
#   --version           Show version
```

### Input Formats Supported
1. **Command-line arguments**: `bubble-sort 5 3 1 4 2`
2. **File (JSON)**: `bubble-sort --file data.json`
3. **File (text)**: `bubble-sort --file data.txt`
4. **Standard input**: `echo "5 3 1 4 2" | bubble-sort`
5. **Interactive mode**: `bubble-sort --interactive`

### Output Formats
- **Default**: Just the sorted array
- **Verbose**: Shows original array, pass count, swap count, sorted result
- **JSON**: Machine-readable format with metadata

### Error Handling
- Exit code 1: Invalid input
- Exit code 2: File not found
- Exit code 3: Invalid file format
- All errors should show helpful messages and usage instructions

### Testing Standards
- Test file location: `tests/test_cli.py`
- Test CLI using pytest with subprocess testing
- Mock file operations in tests
- Test all command-line arguments
- Test error conditions
- Verify exit codes

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-10 | 1.0 | Initial story creation from epic | Bob (Scrum Master) |

---

## Dev Agent Record

This section is populated by the development agent during implementation

### Agent Model Used

### Debug Log References

### Completion Notes List

### File List

---

## QA Results

Results from QA Agent QA review of the completed story implementation
