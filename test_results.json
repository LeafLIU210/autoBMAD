{"created": 1767756913.9462907, "duration": 0.28400087356567383, "exitcode": 1, "root": "D:\\GITHUB\\pytQt_template", "environment": {}, "summary": {"failed": 2, "error": 4, "passed": 1, "total": 7, "collected": 7}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests/test_async_cancellation.py", "type": "Module"}]}, {"nodeid": "tests/test_async_cancellation.py::TestAsyncCancellation", "outcome": "passed", "result": [{"nodeid": "tests/test_async_cancellation.py::TestAsyncCancellation::test_qa_agent_cancellation", "type": "Coroutine", "lineno": 36}, {"nodeid": "tests/test_async_cancellation.py::TestAsyncCancellation::test_qa_agent_timeout", "type": "Coroutine", "lineno": 74}, {"nodeid": "tests/test_async_cancellation.py::TestAsyncCancellation::test_state_manager_lock_cancellation", "type": "Coroutine", "lineno": 114}, {"nodeid": "tests/test_async_cancellation.py::TestAsyncCancellation::test_state_manager_lock_timeout", "type": "Coroutine", "lineno": 139}, {"nodeid": "tests/test_async_cancellation.py::TestAsyncCancellation::test_state_manager_managed_operation", "type": "Coroutine", "lineno": 158}, {"nodeid": "tests/test_async_cancellation.py::TestAsyncCancellation::test_state_manager_managed_operation_cancellation", "type": "Coroutine", "lineno": 169}, {"nodeid": "tests/test_async_cancellation.py::TestAsyncCancellation::test_concurrent_cancellations", "type": "Coroutine", "lineno": 186}]}, {"nodeid": "tests/test_async_cancellation.py", "outcome": "passed", "result": [{"nodeid": "tests/test_async_cancellation.py::TestAsyncCancellation", "type": "Class"}]}], "tests": [{"nodeid": "tests/test_async_cancellation.py::TestAsyncCancellation::test_qa_agent_cancellation", "lineno": 36, "outcome": "failed", "keywords": ["test_qa_agent_cancellation", "asyncio", "pytestmark", "TestAsyncCancellation", "test_async_cancellation.py", "tests", "pytQt_template", ""], "setup": {"duration": 0.0023514999998042185, "outcome": "passed"}, "call": {"duration": 0.0007275000002664456, "outcome": "failed", "crash": {"path": "C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\unittest\\mock.py", "lineno": 1437, "message": "AttributeError: <autoBMAD.epic_automation.qa_agent.QAAgent object at 0x00000227C331BE60> does not have the attribute '_check_code_quality_basics'"}, "traceback": [{"path": "tests\\test_async_cancellation.py", "lineno": 63, "message": ""}, {"path": "C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\unittest\\mock.py", "lineno": 1467, "message": "in __enter__"}, {"path": "C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\unittest\\mock.py", "lineno": 1437, "message": "AttributeError"}], "longrepr": "self = <tests.test_async_cancellation.TestAsyncCancellation object at 0x00000227C267F620>\nqa_agent = <autoBMAD.epic_automation.qa_agent.QAAgent object at 0x00000227C331BE60>\ntemp_dir = 'C:\\\\Users\\\\Administrator\\\\AppData\\\\Local\\\\Temp\\\\tmpk9ukivkk'\n\n        @pytest.mark.asyncio\n        async def test_qa_agent_cancellation(self, qa_agent, temp_dir):\n            \"\"\"Test that QA agent handles cancellation without cancel scope errors.\"\"\"\n            # Create a test story file\n            story_path = Path(temp_dir) / \"test_story.md\"\n            story_path.write_text(\"\"\"\n    # Test Story\n    \n    ## Status\n    **Status**: Ready for Review\n    \n    ## Acceptance Criteria\n    - [ ] AC1\n    \"\"\")\n    \n            source_dir = Path(temp_dir) / \"src\"\n            source_dir.mkdir()\n            test_dir = Path(temp_dir) / \"tests\"\n            test_dir.mkdir()\n    \n            # Simulate cancellation\n            async def cancelling_execute():\n                await asyncio.sleep(0.1)\n                raise asyncio.CancelledError()\n    \n            # Mock the check methods to simulate cancellation\n>           with patch.object(qa_agent, '_check_code_quality_basics', side_effect=cancelling_execute):\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_async_cancellation.py:63: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nC:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\unittest\\mock.py:1467: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <unittest.mock._patch object at 0x00000227C33B2D50>\n\n    def get_original(self):\n        target = self.getter()\n        name = self.attribute\n    \n        original = DEFAULT\n        local = False\n    \n        try:\n            original = target.__dict__[name]\n        except (AttributeError, KeyError):\n            original = getattr(target, name, DEFAULT)\n        else:\n            local = True\n    \n        if name in _builtins and isinstance(target, ModuleType):\n            self.create = True\n    \n        if not self.create and original is DEFAULT:\n>           raise AttributeError(\n                \"%s does not have the attribute %r\" % (target, name)\n            )\nE           AttributeError: <autoBMAD.epic_automation.qa_agent.QAAgent object at 0x00000227C331BE60> does not have the attribute '_check_code_quality_basics'\n\nC:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\unittest\\mock.py:1437: AttributeError"}, "teardown": {"duration": 0.0009484000001975801, "outcome": "passed"}}, {"nodeid": "tests/test_async_cancellation.py::TestAsyncCancellation::test_qa_agent_timeout", "lineno": 74, "outcome": "failed", "keywords": ["test_qa_agent_timeout", "asyncio", "pytestmark", "TestAsyncCancellation", "test_async_cancellation.py", "tests", "pytQt_template", ""], "setup": {"duration": 0.0006422999999813328, "outcome": "passed"}, "call": {"duration": 0.0006185000002005836, "outcome": "failed", "crash": {"path": "C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\unittest\\mock.py", "lineno": 1437, "message": "AttributeError: <autoBMAD.epic_automation.qa_agent.QAAgent object at 0x00000227C33B3D70> does not have the attribute '_check_code_quality_basics'"}, "traceback": [{"path": "tests\\test_async_cancellation.py", "lineno": 101, "message": ""}, {"path": "C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\unittest\\mock.py", "lineno": 1467, "message": "in __enter__"}, {"path": "C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\unittest\\mock.py", "lineno": 1437, "message": "AttributeError"}], "longrepr": "self = <tests.test_async_cancellation.TestAsyncCancellation object at 0x00000227C3053680>\nqa_agent = <autoBMAD.epic_automation.qa_agent.QAAgent object at 0x00000227C33B3D70>\ntemp_dir = 'C:\\\\Users\\\\Administrator\\\\AppData\\\\Local\\\\Temp\\\\tmpj0ewkeqb'\n\n        @pytest.mark.asyncio\n        async def test_qa_agent_timeout(self, qa_agent, temp_dir):\n            \"\"\"Test that QA agent handles timeout gracefully.\"\"\"\n            # Create a test story file\n            story_path = Path(temp_dir) / \"test_story.md\"\n            story_path.write_text(\"\"\"\n    # Test Story\n    \n    ## Status\n    **Status**: Ready for Review\n    \n    ## Acceptance Criteria\n    - [ ] AC1\n    \"\"\")\n    \n            source_dir = Path(temp_dir) / \"src\"\n            source_dir.mkdir()\n            test_dir = Path(temp_dir) / \"tests\"\n            test_dir.mkdir()\n    \n            # Simulate slow execution\n            async def slow_execute():\n                await asyncio.sleep(1.0)  # Longer than timeout\n                return {'passed': True}\n    \n            # Mock the check methods to simulate slow execution\n>           with patch.object(qa_agent, '_check_code_quality_basics', side_effect=slow_execute):\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_async_cancellation.py:101: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nC:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\unittest\\mock.py:1467: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <unittest.mock._patch object at 0x00000227C342C350>\n\n    def get_original(self):\n        target = self.getter()\n        name = self.attribute\n    \n        original = DEFAULT\n        local = False\n    \n        try:\n            original = target.__dict__[name]\n        except (AttributeError, KeyError):\n            original = getattr(target, name, DEFAULT)\n        else:\n            local = True\n    \n        if name in _builtins and isinstance(target, ModuleType):\n            self.create = True\n    \n        if not self.create and original is DEFAULT:\n>           raise AttributeError(\n                \"%s does not have the attribute %r\" % (target, name)\n            )\nE           AttributeError: <autoBMAD.epic_automation.qa_agent.QAAgent object at 0x00000227C33B3D70> does not have the attribute '_check_code_quality_basics'\n\nC:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\unittest\\mock.py:1437: AttributeError"}, "teardown": {"duration": 0.0006756000002496876, "outcome": "passed"}}, {"nodeid": "tests/test_async_cancellation.py::TestAsyncCancellation::test_state_manager_lock_cancellation", "lineno": 114, "outcome": "error", "keywords": ["test_state_manager_lock_cancellation", "asyncio", "pytestmark", "TestAsyncCancellation", "test_async_cancellation.py", "tests", "pytQt_template", ""], "setup": {"duration": 0.02335110000012719, "outcome": "failed", "crash": {"path": "C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\tasks.py", "lineno": 417, "message": "RuntimeError: no running event loop"}, "traceback": [{"path": "tests\\test_async_cancellation.py", "lineno": 35, "message": ""}, {"path": "autoBMAD\\epic_automation\\state_manager.py", "lineno": 136, "message": "in __init__"}, {"path": "C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\tasks.py", "lineno": 417, "message": "RuntimeError"}], "longrepr": "self = <tests.test_async_cancellation.TestAsyncCancellation object at 0x00000227C33B06B0>\ntemp_dir = 'C:\\\\Users\\\\Administrator\\\\AppData\\\\Local\\\\Temp\\\\tmpzz6mypzc'\n\n    @pytest.fixture\n    def state_manager(self, temp_dir):\n        \"\"\"Create a State Manager instance for testing.\"\"\"\n        db_path = Path(temp_dir) / \"test.db\"\n>       return StateManager(db_path=str(db_path))\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_async_cancellation.py:35: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nautoBMAD\\epic_automation\\state_manager.py:136: in __init__\n    asyncio.create_task(self._connection_pool.initialize(self.db_path))\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ncoro = <coroutine object DatabaseConnectionPool.initialize at 0x00000227C3312420>\n\n    def create_task(coro, *, name=None, context=None):\n        \"\"\"Schedule the execution of a coroutine object in a spawn task.\n    \n        Return a Task object.\n        \"\"\"\n>       loop = events.get_running_loop()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^\nE       RuntimeError: no running event loop\n\nC:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\tasks.py:417: RuntimeError"}, "teardown": {"duration": 0.0003538999999364023, "outcome": "passed"}}, {"nodeid": "tests/test_async_cancellation.py::TestAsyncCancellation::test_state_manager_lock_timeout", "lineno": 139, "outcome": "error", "keywords": ["test_state_manager_lock_timeout", "asyncio", "pytestmark", "TestAsyncCancellation", "test_async_cancellation.py", "tests", "pytQt_template", ""], "setup": {"duration": 0.021155399999770452, "outcome": "failed", "crash": {"path": "C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\tasks.py", "lineno": 417, "message": "RuntimeError: no running event loop"}, "traceback": [{"path": "tests\\test_async_cancellation.py", "lineno": 35, "message": ""}, {"path": "autoBMAD\\epic_automation\\state_manager.py", "lineno": 136, "message": "in __init__"}, {"path": "C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\tasks.py", "lineno": 417, "message": "RuntimeError"}], "longrepr": "self = <tests.test_async_cancellation.TestAsyncCancellation object at 0x00000227C33B09E0>\ntemp_dir = 'C:\\\\Users\\\\Administrator\\\\AppData\\\\Local\\\\Temp\\\\tmpxx_nufyt'\n\n    @pytest.fixture\n    def state_manager(self, temp_dir):\n        \"\"\"Create a State Manager instance for testing.\"\"\"\n        db_path = Path(temp_dir) / \"test.db\"\n>       return StateManager(db_path=str(db_path))\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_async_cancellation.py:35: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nautoBMAD\\epic_automation\\state_manager.py:136: in __init__\n    asyncio.create_task(self._connection_pool.initialize(self.db_path))\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ncoro = <coroutine object DatabaseConnectionPool.initialize at 0x00000227C31E8120>\n\n    def create_task(coro, *, name=None, context=None):\n        \"\"\"Schedule the execution of a coroutine object in a spawn task.\n    \n        Return a Task object.\n        \"\"\"\n>       loop = events.get_running_loop()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^\nE       RuntimeError: no running event loop\n\nC:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\tasks.py:417: RuntimeError"}, "teardown": {"duration": 0.00033119999989139615, "outcome": "passed"}}, {"nodeid": "tests/test_async_cancellation.py::TestAsyncCancellation::test_state_manager_managed_operation", "lineno": 158, "outcome": "error", "keywords": ["test_state_manager_managed_operation", "asyncio", "pytestmark", "TestAsyncCancellation", "test_async_cancellation.py", "tests", "pytQt_template", ""], "setup": {"duration": 0.020979200000056153, "outcome": "failed", "crash": {"path": "C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\tasks.py", "lineno": 417, "message": "RuntimeError: no running event loop"}, "traceback": [{"path": "tests\\test_async_cancellation.py", "lineno": 35, "message": ""}, {"path": "autoBMAD\\epic_automation\\state_manager.py", "lineno": 136, "message": "in __init__"}, {"path": "C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\tasks.py", "lineno": 417, "message": "RuntimeError"}], "longrepr": "self = <tests.test_async_cancellation.TestAsyncCancellation object at 0x00000227C33B0D10>\ntemp_dir = 'C:\\\\Users\\\\Administrator\\\\AppData\\\\Local\\\\Temp\\\\tmpqpxj4xc5'\n\n    @pytest.fixture\n    def state_manager(self, temp_dir):\n        \"\"\"Create a State Manager instance for testing.\"\"\"\n        db_path = Path(temp_dir) / \"test.db\"\n>       return StateManager(db_path=str(db_path))\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_async_cancellation.py:35: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nautoBMAD\\epic_automation\\state_manager.py:136: in __init__\n    asyncio.create_task(self._connection_pool.initialize(self.db_path))\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ncoro = <coroutine object DatabaseConnectionPool.initialize at 0x00000227C31674C0>\n\n    def create_task(coro, *, name=None, context=None):\n        \"\"\"Schedule the execution of a coroutine object in a spawn task.\n    \n        Return a Task object.\n        \"\"\"\n>       loop = events.get_running_loop()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^\nE       RuntimeError: no running event loop\n\nC:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\tasks.py:417: RuntimeError"}, "teardown": {"duration": 0.00033389999998689746, "outcome": "passed"}}, {"nodeid": "tests/test_async_cancellation.py::TestAsyncCancellation::test_state_manager_managed_operation_cancellation", "lineno": 169, "outcome": "error", "keywords": ["test_state_manager_managed_operation_cancellation", "asyncio", "pytestmark", "TestAsyncCancellation", "test_async_cancellation.py", "tests", "pytQt_template", ""], "setup": {"duration": 0.021119699999871955, "outcome": "failed", "crash": {"path": "C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\tasks.py", "lineno": 417, "message": "RuntimeError: no running event loop"}, "traceback": [{"path": "tests\\test_async_cancellation.py", "lineno": 35, "message": ""}, {"path": "autoBMAD\\epic_automation\\state_manager.py", "lineno": 136, "message": "in __init__"}, {"path": "C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\tasks.py", "lineno": 417, "message": "RuntimeError"}], "longrepr": "self = <tests.test_async_cancellation.TestAsyncCancellation object at 0x00000227C33B1040>\ntemp_dir = 'C:\\\\Users\\\\Administrator\\\\AppData\\\\Local\\\\Temp\\\\tmpmzz1eg5q'\n\n    @pytest.fixture\n    def state_manager(self, temp_dir):\n        \"\"\"Create a State Manager instance for testing.\"\"\"\n        db_path = Path(temp_dir) / \"test.db\"\n>       return StateManager(db_path=str(db_path))\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_async_cancellation.py:35: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nautoBMAD\\epic_automation\\state_manager.py:136: in __init__\n    asyncio.create_task(self._connection_pool.initialize(self.db_path))\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ncoro = <coroutine object DatabaseConnectionPool.initialize at 0x00000227C3166C00>\n\n    def create_task(coro, *, name=None, context=None):\n        \"\"\"Schedule the execution of a coroutine object in a spawn task.\n    \n        Return a Task object.\n        \"\"\"\n>       loop = events.get_running_loop()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^\nE       RuntimeError: no running event loop\n\nC:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\tasks.py:417: RuntimeError"}, "teardown": {"duration": 0.0003397999998924206, "outcome": "passed"}}, {"nodeid": "tests/test_async_cancellation.py::TestAsyncCancellation::test_concurrent_cancellations", "lineno": 186, "outcome": "passed", "keywords": ["test_concurrent_cancellations", "asyncio", "pytestmark", "TestAsyncCancellation", "test_async_cancellation.py", "tests", "pytQt_template", ""], "setup": {"duration": 0.0006322999997792067, "outcome": "passed"}, "call": {"duration": 0.05847110000013345, "outcome": "passed"}, "teardown": {"duration": 0.0009756999997989624, "outcome": "passed"}}]}