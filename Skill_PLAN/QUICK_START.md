# Claude-Plan v2.0 快速开始指南

## 🚀 立即开始使用

### 1. 安装技能

```bash
# 进入 Skill_PLAN 目录
cd /d/GITHUB/pytQt_template/Skill_PLAN

# 安装 v2.0 技能
claude /skill install claude-plan-v2.skill
```

### 2. 使用示例

#### 场景 1：添加新功能

```
User: 我需要为这个 FastAPI 项目添加用户认证功能

Claude [Plan-Execute Mode]:
📋 理解阶段
- 需求摘要：为 FastAPI 应用添加用户认证
- 涉及范围：models/, api/, utils/ 目录
- 澄清问题：
  1. 使用 JWT 还是 Session-based 认证？
  2. 需要支持 OAuth 吗？
  3. 用户数据存储在哪里？

📐 设计阶段
[分析现有代码，设计方案...]

📝 计划阶段
[生成详细计划...]

🚀 执行阶段
[自动开始执行！]
```

#### 场景 2：重构代码

```
User: 帮我重构 api/items.py，提高可测试性

Claude [Plan-Execute Mode]:
[分析 → 设计 → 计划 → 自动执行]
```

#### 场景 3：修复 Bug

```
User: 用户登录时总是返回 500 错误，请帮我分析并修复

Claude [Plan-Execute Mode]:
[分析日志 → 定位根因 → 制定方案 → 自动修复]
```

## ⚡ 核心特性

### 五阶段自动执行流程

1. **Phase 1: 理解** - 分析需求和现有代码
2. **Phase 2: 设计** - 制定实施方案
3. **Phase 3: 审查** - 验证方案可行性
4. **Phase 4: 计划** - 生成执行计划
5. **Phase 5: 执行** - **自动开始执行！**

### 自动任务跟踪

技能会自动：
- ✅ 创建 TodoWrite 任务列表
- ✅ 按依赖顺序执行任务
- ✅ 实时更新任务状态
- ✅ 自动测试和验证
- ✅ 标记完成的任务

### 支持的操作

**文件操作**:
- 读取、分析、搜索代码
- 编辑、创建、删除文件
- 重构、优化代码结构

**命令执行**:
- 运行测试 (pytest, unittest)
- 代码检查 (ruff, black)
- 构建项目 (build, compile)
- 数据库迁移 (alembic)

## 📋 常用命令

### 激活技能

```bash
# 方式 1：使用命令
claude /plan

# 方式 2：自然语言
请帮我制定计划并执行 [您的需求]
```

### 典型请求模板

```
请帮我 [操作类型] [目标]，包括：
1. 分析现有代码
2. 制定实施方案
3. 自动执行

例如：
请帮我重构用户认证模块，提高可测试性
请帮我添加 JWT 认证功能
请帮我修复登录 500 错误
```

## 🎯 最佳实践

### 1. 明确需求

❌ 不好的请求: "帮我优化代码"
✅ 好的请求: "帮我重构 api/auth.py，提高可测试性，引入依赖注入模式"

### 2. 提供上下文

✅ 包含以下信息:
- 目标文件或模块
- 期望的改进方向
- 技术约束或要求
- 验收标准

### 3. 保持交互

- 可以随时暂停执行
- 可以要求修改计划
- 可以要求跳过某些步骤
- 可以要求添加验证

## 📊 进度跟踪

技能会显示实时进度：

```
📝 执行状态
- [x] 计划已制定
- [🚀] 执行中
  └─ Task 1: 分析现有代码 [进行中]
- [ ] 已完成

⏱️ 预计剩余时间: 15-20 分钟
```

## 🛠️ 工具权限

v2.0 完整工具集 (18 个工具):

**分析工具**:
- Read, LS, Glob, Grep, Task
- TodoRead, TodoWrite
- WebFetch, WebSearch, NotebookRead

**执行工具**:
- Edit, Write, MultiEdit
- Bash, KillShell, TaskOutput
- NotebookEdit

## ❓ 常见问题

### Q: 如何停止执行？
A: 输入 "停止" 或 "暂停执行"，技能会立即停止。

### Q: 可以修改计划吗？
A: 可以。在任何时候说 "修改计划"，技能会暂停并允许修改。

### Q: 执行失败怎么办？
A: 技能会自动分析错误，提供解决方案。您也可以手动干预。

### Q: 如何查看详细日志？
A: 技能会实时显示执行日志，包括每个步骤的详细输出。

### Q: 可以并行执行任务吗？
A: 目前按顺序执行，确保依赖关系正确。未来版本将支持并行执行。

## 📚 更多资源

- **详细文档**: [INSTALLATION.md](INSTALLATION.md)
- **升级说明**: [UPGRADE_SUMMARY.md](UPGRADE_SUMMARY.md)
- **设计文档**: [PLAN_SKILL_DESIGN.md](PLAN_SKILL_DESIGN.md)

## 🆘 获取帮助

如有问题，请：
1. 查看详细文档
2. 使用 "暂停" 功能询问具体问题
3. 查看执行日志定位问题

---

**版本**: v2.0.0
**最后更新**: 2026-01-19
**状态**: ✅ 可立即使用

🎉 **现在就开始使用吧！**
